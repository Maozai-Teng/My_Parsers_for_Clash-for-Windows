parsers: # array
  # - reg: ^.*$ åŒ¹é…æ‰€æœ‰è®¢é˜…ï¼Œæˆ–  - url: https://example.com/profile.yaml æŒ‡å®šè®¢é˜…
  - reg: ^.*$
    # åˆ é™¤æœåŠ¡å•†æä¾›çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
      module.exports.parse = async (raw, { axios, yaml, notify, console }, { name, url, interval, selected }) => {
          const rawObj = yaml.parse(raw);


          // è¿‡æ»¤æ‰ proxies ä¸­ name å­—æ®µåŒ…å«æŒ‡å®šå…³é”®è¯çš„ä»£ç†é…ç½®
          if (Array.isArray(rawObj.proxies)) {
              const keywordsToCheck = ['25å€'];  // è¦æ’é™¤çš„å…³é”®è¯

              rawObj.proxies = rawObj.proxies.filter(proxy =>
                  keywordsToCheck.every(keyword => !proxy.name.includes(keyword))  // ç¡®ä¿ä»£ç†çš„ name å­—æ®µä¸åŒ…å«ä»»ä½•ä¸€ä¸ªå…³é”®è¯
              );
          }


          // å®šä¹‰å¤„ç†åçš„ DNS é…ç½®
          const dnsConfig = {
              enable: false,
              listen: '0.0.0.0:1053',
              ipv6: false,
              useSystemHosts: false,
              cacheAlgorithm: 'arc',
              'enhanced-mode': 'fake-ip',
              'fake-ip-range': '198.18.0.1/16',
              fakeIpFilter: [
                  '+.lan',
                  '+.local',
                  '+.msftconnecttest.com',
                  '+.msftncsi.com',
                  'localhost.ptlogin2.qq.com',
                  'localhost.sec.qq.com',
                  'localhost.work.weixin.qq.com'
              ],
              'default-nameserver': [
                  '223.5.5.5',
                  '119.29.29.29',
                  '114.114.115.115',
                  '1.1.1.1',
                  '8.8.8.8'
              ],
              nameserver: [
                  'https://dns.alidns.com/dns-query',
                  'https://223.6.6.6/dns-query',
                  'https://doh.pub/dns-query',
                  'https://doh.360.cn/dns-query',
                  'https://1.1.1.1/dns-query',
                  'https://1.0.0.1/dns-query',
                  'https://208.67.222.222/dns-query',
                  'https://208.67.220.220/dns-query',
                  'https://194.242.2.2/dns-query',
                  'https://194.242.2.3/dns-query'
              ],
              nameserverPolicy: {
                  'geosite:private,cn,geolocation-cn': [
                      'https://dns.alidns.com/dns-query',
                      'https://223.6.6.6/dns-query',
                      'https://doh.pub/dns-query',
                      'https://doh.360.cn/dns-query'
                  ],
                  'geosite:google,youtube,telegram,gfw,geolocation-!cn': [
                      'https://1.1.1.1/dns-query',
                      'https://1.0.0.1/dns-query',
                      'https://208.67.222.222/dns-query',
                      'https://208.67.220.220/dns-query',
                      'https://194.242.2.2/dns-query',
                      'https://194.242.2.3/dns-query'
                  ]
              },
              fallback: [
                  'tls://8.8.4.4',
                  'tls://1.1.1.1'
              ],
              fallbackFilter: {
                  geoip: true,
                  geoipCode: 'CN',
                  nameserverPolicy: ['gfw'],
                  ipcidr: ['240.0.0.0/4'],
                  domain: [
                      '+.google.com',
                      '+.facebook.com',
                      '+.youtube.com'
                  ]
              }
          };

          // åˆå¹¶åŸæœ‰ DNS é…ç½®å’Œæ–°çš„ DNS é…ç½®
          rawObj.dns = Object.assign({}, rawObj.dns, dnsConfig);


          // å®šä¹‰éœ€è¦åˆ é™¤çš„å…³é”®è¯åˆ—è¡¨
          const keywordsToRemove = [
              'Lv3 ',
              ' [2.0]',
              'ğŸ‡­ğŸ‡°',
              'ğŸ‡¨ğŸ‡³',
              'ğŸ‡¯ğŸ‡µ',
              'ğŸ‡¸ğŸ‡¬',
              'ğŸ‡ºğŸ‡¸',
              '[Trojan]',
              '[å€ç‡:0.8]',
              '[å€ç‡:0.9]',
              '[å€ç‡:1]',
          ];

          // å®šä¹‰éœ€è¦æ·»åŠ çš„å…³é”®è¯æ˜ å°„
          const keywordsToAdd = {
              'é¦™æ¸¯|æ¸¯': 'ğŸ¬ ',
              'å°æ¹¾|å°': 'ğŸ¸ ',
              'æ¾³é—¨': 'ğŸ¹ ',
              'ç¾å›½': 'ğŸ¦… ',
              'æ—¥æœ¬': 'ğŸ” ',
              'éŸ©å›½': 'ğŸ¶ ',
              'æ–°åŠ å¡|é©¬æ¥è¥¿äºš': 'ğŸµ ',
              'æ¾³å¤§åˆ©äºš': 'ğŸ¨ ',
              'è¿ªæ‹œ': 'ğŸª ',
              'å·´è¥¿': 'ğŸ¦œ ',
              'ä¿„ç½—æ–¯': 'ğŸ» ',
              'å¾·å›½|è‹±å›½|æ³•å›½|è·å…°|åœŸè€³å…¶': 'ğŸ¦„ '
          };

          // å®šä¹‰æ‰¹é‡æ›¿æ¢çš„æ˜ å°„å…³ç³»
          const replaceMap = {
              'å‚»é€¼': 'SB'
          };

          // åˆ é™¤ name å­—æ®µä¸­åŒ…å«æŒ‡å®šå…³é”®è¯çš„éƒ¨åˆ†
          const removeKeywords = (name, keywords) =>
              keywords.reduce((result, keyword) => result.replace(keyword, ''), name);

          // åœ¨ name å­—æ®µå‰é¢æ·»åŠ æŒ‡å®šå…³é”®è¯
          const addKeywords = (name, keywordMap) => {
              for (let start = 0; start < name.length; start++) {
                  for (let end = start + 1; end <= name.length; end++) {
                      const subString = name.slice(start, end);
                      for (const [keys, value] of Object.entries(keywordMap)) {
                          if (keys.split('|').some(key => subString.includes(key))) {
                              return value + name;
                          }
                      }
                  }
              }
              return name;
          };

          // æ‰¹é‡æ›¿æ¢ name å­—æ®µä¸­çš„æ–‡æœ¬
          const replaceText = (name, replaceMap) =>
              Object.entries(replaceMap).reduce((result, [search, replacement]) =>
                  result.replace(new RegExp(search, 'g'), replacement), name);

          // å¤„ç† proxies æ•°ç»„
          if (Array.isArray(rawObj.proxies)) {
              rawObj.proxies = rawObj.proxies.map(proxy => {
                  proxy.name = removeKeywords(proxy.name, keywordsToRemove);
                  proxy.name = addKeywords(proxy.name, keywordsToAdd);
                  proxy.name = replaceText(proxy.name, replaceMap);
                  return proxy;
              });

              // æ— è®ºä»£ç†æ•°ç»„å†…å®¹å¦‚ä½•ï¼Œç›´æ¥æ·»åŠ ä¸€ä¸ªåä¸ºâ€œä½ æ²¡æœ‰ç›¸å…³èŠ‚ç‚¹â€çš„èŠ‚ç‚¹
              rawObj.proxies.push({
                  name: 'ğŸˆšï¸ æ— ç›¸å…³èŠ‚ç‚¹',
                  type: 'ss',
                  server: '0.0.0.0',
                  port: 443,
                  password: 111,
                  cipher: 'chacha20-ietf-poly1305',
                  udp: true,
                  // å…¶ä»–å¯èƒ½éœ€è¦çš„å±æ€§å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ 
              });
          }



          // è¿‡æ»¤ proxies æ•°ç»„ä¸­çš„ä»£ç†é…ç½®
          const filterProxies = (proxies) => proxies
              .map(proxy => proxy.name) // æå–ä»£ç†çš„ name å­—æ®µ
              .filter(name => {
                  const keywordsToRemove = [
                      'å‰©ä½™',
                      'ink',
                      '[å€ç‡:1.7]',
                      '[å€ç‡:2.5]',
                      'x2',
                      'é•¿æœŸæœ‰æ•ˆ',
                      'é˜²å¤±è”',
                      'ä¸€å…ƒæœºåœº.ink',
                      'å€ç‡æ˜¯æµé‡æ¶ˆè€—å¿«æ…¢è€Œéé€Ÿåº¦å¿«æ…¢',
                      'æ¯æœˆåˆ·æ–°è®¢é˜…è·å–æ–°èŠ‚ç‚¹',
                      'ğŸˆšï¸ æ— ç›¸å…³èŠ‚ç‚¹'
                  ];
                  return !keywordsToRemove.some(keyword => name.includes(keyword)); // æ’é™¤åŒ…å«æŒ‡å®šå…³é”®è¯çš„ä»£ç†åç§°
              });

          const allProxies = rawObj.proxies.map(proxy => proxy.name); // è·å–æ‰€æœ‰ä»£ç†çš„ name å­—æ®µ
          const filteredProxies = filterProxies(rawObj.proxies); // ä½¿ç”¨ filterProxies å‡½æ•°è¿‡æ»¤ä»£ç†

          const furtherFilter = (proxies, includeKeywords = [], excludeKeywords = []) => proxies
              .filter(name => includeKeywords.length === 0 || includeKeywords.some(keyword => name.includes(keyword))) // åŒ…å«æŒ‡å®šå…³é”®è¯
              .filter(name => excludeKeywords.length === 0 || !excludeKeywords.some(keyword => name.includes(keyword))); // æ’é™¤æŒ‡å®šå…³é”®è¯

          const filteredJapanProxies = furtherFilter(filteredProxies, ['æ—¥æœ¬'], []); // ä»…åŒ…å«æ—¥æœ¬ä»£ç†
          const filteredRichProxies = furtherFilter(allProxies, ['x2', '[å€ç‡:2.5]', '[å€ç‡:1.7]'], []); // åŒ…å«å…¨éƒ¨èŠ‚ç‚¹é‡Œé¢çš„é«˜å€ç‡ä»£ç†

          // æå–é‡å¤çš„é…ç½®é¡¹ä¸ºä¸€ä¸ªå¯¹è±¡
          const commonConfig = {
              interval: 600,                                  // ä»£ç†ç»„æ£€æŸ¥é—´éš”ä¸º300ç§’,è‡ªåŠ¨æµ‹è¯•é—´éš”æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé select ç±»å‹åˆ†ç»„å¿…è¦
              timeout: 3000,                                  // è¶…æ—¶æ—¶é—´ä¸º3000æ¯«ç§’
              url: "http://www.gstatic.com/generate_204",    // æ£€æŸ¥URL,æµ‹è¯•åœ°å€ï¼Œé select ç±»å‹åˆ†ç»„å¿…è¦
              lazy: true,                                     // å¯ç”¨æ‡’åŠ è½½ï¼Œæ²¡é€‰ä¸­å°±ä¸éœ€è¦æ£€æµ‹
              maxFailedTimes: 3,                              // æœ€å¤§å¤±è´¥æ¬¡æ•°
              hidden: false                                   // æ˜¯å¦éšè—ä»£ç†ç»„
          };

          /*
              ç­–ç•¥ç»„ type ç±»å‹è¯´æ˜
                  select         # æ‰‹åŠ¨é€‰ç‚¹
                  url-test       # è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
                  fallback       # èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ª
                  load-balance   # å‡è¡¡ä½¿ç”¨åˆ†ç»„å†…çš„èŠ‚ç‚¹
          
              è´Ÿè½½å‡è¡¡ load-balance ç­–ç•¥è¯´æ˜
                  consistent-hashing  å°†ä¼šæŠŠç›¸åŒé¡¶çº§åŸŸåçš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…çš„åŒä¸€ä¸ªä»£ç†èŠ‚ç‚¹
                  round-robin         å°†ä¼šæŠŠæ‰€æœ‰çš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…ä¸åŒçš„ä»£ç†èŠ‚ç‚¹
          */

          // å®šä¹‰ä»£ç†ç»„é…ç½®
          const proxyGroups = [
              {
                  name: 'ğŸš€ èŠ‚ç‚¹é€‰æ‹©',
                  ...commonConfig,                  // å¼•å…¥é€šç”¨é…ç½®
                  type: "select",                   // é€‰æ‹©ç±»å‹
                  proxies: [
                      'â™»ï¸ è´Ÿè½½å‡è¡¡',
                      'â±ï¸ å»¶è¿Ÿé€‰ä¼˜',
                      'ğŸš‘ æ•…éšœè½¬ç§»',
                      ...allProxies                  // åŒ…å«æ‰€æœ‰ä»£ç†
                  ]
              },
              {
                  name: 'ğŸ“¢ å…¬å‘Šå±•ç¤º',
                  ...commonConfig,
                  type: "select",
                  proxies: allProxies
              },
              {
                  name: 'ğŸ¤– ChatGPT',
                  ...commonConfig,
                  type: "url-test",                 // URL æµ‹è¯•ç±»å‹
                  interval: 1800, 
                  tolerance: 50,                    // å…è®¸çš„å»¶è¿Ÿåå·®ï¼Œå•ä½ä¸ºæ¯«ç§’
                  url: "https://chatgpt.com",
                  proxies: furtherFilter(filteredProxies, [], ['é¦™æ¸¯', 'æ¾³é—¨']) // è¿‡æ»¤æ‰é¦™æ¸¯ã€æ¸¯ã€æ¾³é—¨çš„ä»£ç†
              },
              {
                  name: 'ğŸ” æˆ‘è¦æ¶©æ¶©',
                  ...commonConfig,
                  type: "load-balance",             // è´Ÿè½½å‡è¡¡ç±»å‹
                  strategy: "consistent-hashing",  // è´Ÿè½½å‡è¡¡ç­–ç•¥
                  proxies: furtherFilter(filteredProxies, [], ['æ—¥æœ¬']) // è¿‡æ»¤æ‰æ—¥æœ¬çš„ä»£ç†
              },
              {
                  name: 'ğŸŒ æ—¥æœ¬èŠ‚ç‚¹',
                  ...commonConfig,
                  type: filteredJapanProxies.length > 0 ? "load-balance" : "select",
                  strategy: filteredJapanProxies.length > 0 ? "consistent-hashing" : undefined,
                  proxies: filteredJapanProxies.length > 0
                      ? filteredJapanProxies
                      : [
                          'ğŸˆšï¸ æ— ç›¸å…³èŠ‚ç‚¹',
                          'â™»ï¸ è´Ÿè½½å‡è¡¡',
                          'â±ï¸ å»¶è¿Ÿé€‰ä¼˜',
                          'ğŸš‘ æ•…éšœè½¬ç§»'
                      ] // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ç›¸å…³èŠ‚ç‚¹ï¼Œåˆ™æ·»åŠ â€œğŸˆšï¸ æ— ç›¸å…³èŠ‚ç‚¹â€ç»„
              },
              {
                  name: 'ğŸ’ åœŸè±ªä¸“ç”¨',
                  ...commonConfig,
                  type: filteredRichProxies.length > 0 ? "load-balance" : "select",
                  strategy: filteredRichProxies.length > 0 ? "consistent-hashing" : undefined,
                  proxies: filteredRichProxies.length > 0
                      ? filteredRichProxies
                      : [
                          'ğŸˆšï¸ æ— ç›¸å…³èŠ‚ç‚¹',
                          'â™»ï¸ è´Ÿè½½å‡è¡¡',
                          'â±ï¸ å»¶è¿Ÿé€‰ä¼˜',
                          'ğŸš‘ æ•…éšœè½¬ç§»'
                      ]
              },
              {
                  name: 'â™»ï¸ è´Ÿè½½å‡è¡¡',
                  ...commonConfig,
                  type: "load-balance",
                  strategy: "consistent-hashing",
                  proxies: filteredProxies           // ç»è¿‡è¿‡æ»¤çš„ä»£ç†
              },
              {
                  name: 'â±ï¸ å»¶è¿Ÿé€‰ä¼˜',
                  ...commonConfig,
                  type: "url-test",
                  interval: 1800,
                  tolerance: 50,
                  proxies: filteredProxies
              },
              {
                  name: 'ğŸš‘ æ•…éšœè½¬ç§»',
                  ...commonConfig,
                  type: "fallback",                 // æ•…éšœè½¬ç§»ç±»å‹
                  proxies: filteredProxies
              }
          ];

          // å°† proxyGroups æ·»åŠ åˆ° rawObj ä¸­
          rawObj['proxy-groups'] = proxyGroups;


          // å®šä¹‰å¤„ç†åçš„ rules é…ç½®
          const rulesConfig = [
              // è‡ªå®šä¹‰è§„åˆ™
              "DOMAIN-SUFFIX,xsijishe.net,â±ï¸ å»¶è¿Ÿé€‰ä¼˜",
              "DOMAIN-SUFFIX,sj474.vip,â±ï¸ å»¶è¿Ÿé€‰ä¼˜",
              "DOMAIN-SUFFIX,urlimage.cc,DIRECT",
              "DOMAIN-SUFFIX,ptt.cc,â±ï¸ å»¶è¿Ÿé€‰ä¼˜",
              "DOMAIN-SUFFIX,emojiall.com,DIRECT",             // ç›´æ¥è®¿é—® emojiall.com
              "DOMAIN-KEYWORD,javdb,ğŸ” æˆ‘è¦æ¶©æ¶©",              // è®¿é—® javdb ç›¸å…³çš„åŸŸåæ—¶ä½¿ç”¨â€œğŸ” æˆ‘è¦æ¶©æ¶©â€ç­–ç•¥
              "DOMAIN-SUFFIX,clash.razord.top,DIRECT",         // ç›´æ¥è®¿é—® clash.razord.top
              "DOMAIN-SUFFIX,yacd.haishan.me,DIRECT",          // ç›´æ¥è®¿é—® yacd.haishan.me
              // "DOMAIN-SUFFIX,googleapis.cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",       // è®¿é—® googleapis.cn ä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              // "DOMAIN-SUFFIX,gstatic.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",         // è®¿é—® gstatic.com ä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              // "DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©", // è®¿é—® xn--ngstr-lra8j.com ä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              // "DOMAIN-SUFFIX,github.io,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",           // è®¿é—® github.io ä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              // "DOMAIN,v2rayse.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",                // è®¿é—® v2rayse.com ä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥

              // è‡ªå®šä¹‰è§„åˆ™é›†
              "RULE-SET,china,DIRECT",                         // ä½¿ç”¨ china è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,steamcn,DIRECT",                       // ä½¿ç”¨ steamcn è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,dmm,ğŸŒ æ—¥æœ¬èŠ‚ç‚¹",                       // ä½¿ç”¨ dmm è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸŒ æ—¥æœ¬èŠ‚ç‚¹â€ç­–ç•¥
              "RULE-SET,openai,ğŸ¤– ChatGPT",                    // ä½¿ç”¨ openai è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸ¤– ChatGPTâ€ç­–ç•¥
              "RULE-SET,xbox,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",                      // ä½¿ç”¨ xbox è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              "RULE-SET,youtube,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",                   // ä½¿ç”¨ youtube è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              "RULE-SET,netflix,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",                   // ä½¿ç”¨ netflix è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥

              // Loyalsoldier è§„åˆ™é›†
              "RULE-SET,telegramcidr,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve",  // ä½¿ç”¨ telegramcidr è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥ï¼Œç¦ç”¨ DNS è§£æ
              "RULE-SET,lancidr,DIRECT,no-resolve",            // ä½¿ç”¨ lancidr è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®ï¼Œç¦ç”¨ DNS è§£æ
              "RULE-SET,icloud,DIRECT",                        // ä½¿ç”¨ icloud è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,applications,DIRECT",                  // ä½¿ç”¨ applications è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,private,DIRECT",                       // ä½¿ç”¨ private è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,apple,DIRECT",                         // ä½¿ç”¨ apple è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,google,DIRECT",                        // ä½¿ç”¨ google è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,tld-not-cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",                // ä½¿ç”¨ tld-not-cn è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              "RULE-SET,gfw,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",                       // ä½¿ç”¨ gfw è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              "RULE-SET,cncidr,DIRECT,no-resolve",             // ä½¿ç”¨ cncidr è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®ï¼Œç¦ç”¨ DNS è§£æ
              "RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©",                     // ä½¿ç”¨ proxy è§„åˆ™é›†ï¼Œä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
              "RULE-SET,direct,DIRECT",                        // ä½¿ç”¨ direct è§„åˆ™é›†ï¼Œç›´æ¥è®¿é—®
              "RULE-SET,reject,REJECT",                        // ä½¿ç”¨ reject è§„åˆ™é›†ï¼Œæ‹’ç»è®¿é—®

              // IP è§„åˆ™
              "DOMAIN-SUFFIX,local,DIRECT",                    // ç›´æ¥è®¿é—® local åŸŸ
              "IP-CIDR,127.0.0.0/8,DIRECT",                    // ç›´æ¥è®¿é—® localhost èŒƒå›´
              "IP-CIDR,172.16.0.0/12,DIRECT",                  // ç›´æ¥è®¿é—®å†…ç½‘åœ°å€
              "IP-CIDR,192.168.0.0/16,DIRECT",                 // ç›´æ¥è®¿é—®å†…ç½‘åœ°å€
              "IP-CIDR,10.0.0.0/8,DIRECT",                     // ç›´æ¥è®¿é—®å†…ç½‘åœ°å€
              "IP-CIDR,17.0.0.0/8,DIRECT",                     // ç›´æ¥è®¿é—®å†…ç½‘åœ°å€
              "IP-CIDR,100.64.0.0/10,DIRECT",                  // ç›´æ¥è®¿é—®å†…ç½‘åœ°å€
              "IP-CIDR,224.0.0.0/4,DIRECT",                    // ç›´æ¥è®¿é—®å¤šæ’­åœ°å€
              "IP-CIDR6,fe80::/10,DIRECT",                     // ç›´æ¥è®¿é—® IPv6 é“¾è·¯æœ¬åœ°åœ°å€
              "GEOIP,LAN,DIRECT,no-resolve",                   // ç›´æ¥è®¿é—®å±€åŸŸç½‘åœ°å€ï¼Œç¦ç”¨ DNS è§£æ
              "GEOIP,CN,DIRECT,no-resolve",                    // ç›´æ¥è®¿é—®ä¸­å›½åœ°å€ï¼Œç¦ç”¨ DNS è§£æ
              "MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©"                              // é»˜è®¤ä½¿ç”¨â€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ç­–ç•¥
          ];

          // å°†å¤„ç†åçš„ rules é…ç½®æ·»åŠ åˆ° rawObj ä¸­
          rawObj.rules = rulesConfig;


          // æå–é‡å¤çš„é…ç½®é¡¹ä¸ºä¸€ä¸ªå¯¹è±¡
          const commonRuleProviderConfig = {
              type: 'http',
              format: 'yaml',
              interval: 86400
          };

          // å®šä¹‰ rule-providers é…ç½®
          const ruleProvidersConfig = {
              reject: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt',
                  path: './ruleset/loyalsoldier/reject.yaml'
              },
              icloud: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt',
                  path: './ruleset/loyalsoldier/icloud.yaml'
              },
              apple: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt',
                  path: './ruleset/loyalsoldier/apple.yaml'
              },
              google: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt',
                  path: './ruleset/loyalsoldier/google.yaml'
              },
              proxy: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt',
                  path: './ruleset/loyalsoldier/proxy.yaml'
              },
              direct: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt',
                  path: './ruleset/loyalsoldier/direct.yaml'
              },
              private: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt',
                  path: './ruleset/loyalsoldier/private.yaml'
              },
              gfw: {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt',
                  path: './ruleset/loyalsoldier/gfw.yaml'
              },
              'tld-not-cn': {
                  ...commonRuleProviderConfig,
                  behavior: 'domain',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt',
                  path: './ruleset/loyalsoldier/tld-not-cn.yaml'
              },
              telegramcidr: {
                  ...commonRuleProviderConfig,
                  behavior: 'ipcidr',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt',
                  path: './ruleset/loyalsoldier/telegramcidr.yaml'
              },
              cncidr: {
                  ...commonRuleProviderConfig,
                  behavior: 'ipcidr',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt',
                  path: './ruleset/loyalsoldier/cncidr.yaml'
              },
              lancidr: {
                  ...commonRuleProviderConfig,
                  behavior: 'ipcidr',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt',
                  path: './ruleset/loyalsoldier/lancidr.yaml'
              },
              applications: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt',
                  path: './ruleset/loyalsoldier/applications.yaml'
              },
              openai: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://raw.githubusercontent.com/ericz15/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml',
                  path: './ruleset/blackmatrix7/openai.yaml'
              },
              steamcn: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/SteamCN/SteamCN.yaml',
                  path: './ruleset/blackmatrix7/steamcn.yaml'
              },
              youtube: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml',
                  path: './ruleset/blackmatrix7/youtube.yaml'
              },
              netflix: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix_Classical.yaml',
                  path: './ruleset/blackmatrix7/netflix.yaml'
              },
              china: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml',
                  path: './ruleset/blackmatrix7/china.yaml'
              },
              xbox: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Xbox/Xbox.yaml',
                  path: './ruleset/blackmatrix7/xbox.yaml'
              },
              dmm: {
                  ...commonRuleProviderConfig,
                  behavior: 'classical',
                  url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/DMM/DMM.yaml',
                  path: './ruleset/blackmatrix7/dmm.yaml'
              }
          };

          // åˆå§‹åŒ– proxy-providers é…ç½®
          rawObj['proxy-providers'] = {};


          // å°† rule-providers é…ç½®æ·»åŠ åˆ° rawObj ä¸­
          rawObj['rule-providers'] = ruleProvidersConfig;


          // è¿”å›å¤„ç†åçš„ YAML æ•°æ®
          return yaml.stringify(rawObj);
      }
